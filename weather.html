<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .weather-card {
            backdrop-filter: blur(10px) saturate(180%);
            -webkit-backdrop-filter: blur(10px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(209, 213, 219, 0.3);
        }
        .search-input::placeholder {
            color: #a0aec0;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-900 to-purple-900 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-4xl mx-auto">
        <div class="weather-card p-6 md:p-8 shadow-2xl">
            <!-- Search Bar -->
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6">
                <h1 class="text-2xl font-bold text-white">Weather Forecast</h1>
                <div class="relative w-full sm:max-w-xs">
                    <input type="text" id="citySearch" placeholder="Enter city name..." class="search-input w-full bg-white/10 text-white rounded-lg py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400">
                    <button id="searchBtn" class="absolute right-3 top-1/2 -translate-y-1/2 text-white/70 hover:text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </button>
                </div>
            </div>

            <!-- Main Weather Display -->
            <div id="weather-display" class="grid grid-cols-1 md:grid-cols-2 gap-8 text-white">
                <!-- Current Weather -->
                <div class="flex flex-col justify-between p-6 rounded-lg bg-black/10">
                    <div>
                        <p id="current-city" class="text-3xl font-bold">Huntsville</p>
                        <p id="current-date" class="text-sm opacity-70">Sunday, September 14</p>
                    </div>
                    <div class="flex items-center justify-between mt-4">
                         <div class="flex items-start">
                            <p id="current-temp" class="text-7xl font-bold">72</p>
                            <span class="text-2xl font-medium mt-2">°F</span>
                        </div>
                        <div id="current-icon" class="w-24 h-24">
                           <!-- Weather icon will be injected here -->
                        </div>
                    </div>
                     <p id="current-description" class="text-lg capitalize mt-2 text-center">Clear Sky</p>
                </div>
                
                <!-- Details & Forecast -->
                <div class="space-y-6">
                    <!-- Additional Details -->
                    <div class="p-6 rounded-lg bg-black/10">
                        <h2 class="font-semibold mb-4 text-lg">Details</h2>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div class="space-y-2">
                                <p class="opacity-70">Feels Like</p>
                                <p id="feels-like" class="font-semibold text-lg">74°F</p>
                            </div>
                            <div class="space-y-2">
                                <p class="opacity-70">Wind</p>
                                <p id="wind-speed" class="font-semibold text-lg">5 mph</p>
                            </div>
                            <div class="space-y-2">
                                <p class="opacity-70">Humidity</p>
                                <p id="humidity" class="font-semibold text-lg">60%</p>
                            </div>
                            <div class="space-y-2">
                                <p class="opacity-70">UV Index</p>
                                <p id="uv-index" class="font-semibold text-lg">Low</p>
                            </div>
                        </div>
                    </div>

                    <!-- Forecast -->
                    <div class="p-6 rounded-lg bg-black/10">
                        <h2 class="font-semibold mb-4 text-lg">5-Day Forecast</h2>
                        <div id="forecast-container" class="space-y-3">
                            <!-- Forecast items will be injected here -->
                        </div>
                    </div>
                </div>
            </div>
             <!-- Loading indicator -->
            <div id="loading" class="hidden text-white text-center py-10">
                <svg class="animate-spin h-8 w-8 text-white mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p class="mt-2">Fetching weather data...</p>
            </div>
            <!-- Error Message -->
            <div id="error-message" class="hidden text-red-400 text-center p-4 mt-4 rounded-lg bg-red-500/10">
                <p>Could not fetch weather data. Please check the city name or your API key.</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const API_KEY = 'YOUR_API_KEY_HERE'; // <-- IMPORTANT: Replace with your OpenWeatherMap API key

            const searchInput = document.getElementById('citySearch');
            const searchBtn = document.getElementById('searchBtn');

            // DOM Elements for updating
            const currentCityEl = document.getElementById('current-city');
            const currentDateEl = document.getElementById('current-date');
            const currentTempEl = document.getElementById('current-temp');
            const currentIconEl = document.getElementById('current-icon');
            const currentDescriptionEl = document.getElementById('current-description');
            const feelsLikeEl = document.getElementById('feels-like');
            const windSpeedEl = document.getElementById('wind-speed');
            const humidityEl = document.getElementById('humidity');
            const uvIndexEl = document.getElementById('uv-index');
            const forecastContainer = document.getElementById('forecast-container');
            const loadingEl = document.getElementById('loading');
            const errorEl = document.getElementById('error-message');
            const weatherDisplayEl = document.getElementById('weather-display');

            const weatherIcons = {
                '01d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFD700" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>`,
                '01n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>`,
                '02d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></svg>`,
                '02n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></svg>`,
                '03d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></svg>`,
                '03n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></svg>`,
                '04d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/></svg>`,
                '04n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/></svg>`,
                '09d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><path d="m17 14.5-5-5-5 5"/><path d="m12 20-5-5"/></svg>`,
                '09n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><path d="m17 14.5-5-5-5 5"/><path d="m12 20-5-5"/></svg>`,
                '10d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/><path d="M16 14v6"/><path d="M8 14v6"/><path d="M12 16v6"/></svg>`,
                '10n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/><path d="M16 14v6"/><path d="M8 14v6"/><path d="M12 16v6"/></svg>`,
                '11d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16.9231L13 22l-3-7-7-3 5.0769-8L21 16.9231z"/><path d="M13 22l-3-7-7-3 5.0769-8L21 16.9231z"/><path d="M13 22l-3-7-7-3 5.0769-8L21 16.9231z"/></svg>`,
                '11n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16.9231L13 22l-3-7-7-3 5.0769-8L21 16.9231z"/><path d="M13 22l-3-7-7-3 5.0769-8L21 16.9231z"/><path d="M13 22l-3-7-7-3 5.0769-8L21 16.9231z"/></svg>`,
                '13d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"/><line x1="8" y1="16" x2="8" y2="16"/><line x1="8" y1="20" x2="8" y2="20"/><line x1="12" y1="18" x2="12" y2="18"/><line x1="12" y1="22" x2="12" y2="22"/><line x1="16" y1="16" x2="16" y2="16"/><line x1="16" y1="20" x2="16" y2="20"/></svg>`,
                '13n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"/><line x1="8" y1="16" x2="8" y2="16"/><line x1="8" y1="20" x2="8" y2="20"/><line x1="12" y1="18" x2="12" y2="18"/><line x1="12" y1="22" x2="12" y2="22"/><line x1="16" y1="16" x2="16" y2="16"/><line x1="16" y1="20" x2="16" y2="20"/></svg>`,
                '50d': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h18"/><path d="M3 6h18"/><path d="M3 18h18"/></svg>`,
                '50n': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h18"/><path d="M3 6h18"/><path d="M3 18h18"/></svg>`,
            };

            const searchWeather = async () => {
                const city = searchInput.value.trim();
                if (!city) return;

                showLoading(true);
                await getWeatherData(city);
                showLoading(false);
                searchInput.value = '';
            };

            const getWeatherData = async (city) => {
                if (API_KEY === 'YOUR_API_KEY_HERE') {
                    console.warn("Using mock data. Please replace 'YOUR_API_KEY_HERE' with your actual OpenWeatherMap API key.");
                    displayMockData(city);
                    return;
                }

                const geoUrl = `https://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=1&appid=${API_KEY}`;
                
                try {
                    const geoResponse = await fetch(geoUrl);
                    if (!geoResponse.ok) throw new Error('Failed to fetch geo data.');
                    const geoData = await geoResponse.json();
                    if (geoData.length === 0) throw new Error('City not found.');
                    
                    const { lat, lon } = geoData[0];
                    const weatherUrl = `https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&exclude=minutely,hourly,alerts&units=imperial&appid=${API_KEY}`;

                    const weatherResponse = await fetch(weatherUrl);
                    if (!weatherResponse.ok) throw new Error('Failed to fetch weather data.');
                    const weatherData = await weatherResponse.json();

                    updateUI(weatherData, geoData[0].name);
                    showError(false);

                } catch (error) {
                    console.error('Error fetching weather data:', error);
                    showError(true);
                }
            };
            
            const updateUI = (data, cityName) => {
                // Update current weather
                currentCityEl.textContent = cityName;
                currentDateEl.textContent = new Date(data.current.dt * 1000).toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
                currentTempEl.textContent = Math.round(data.current.temp);
                currentDescriptionEl.textContent = data.current.weather[0].description;
                currentIconEl.innerHTML = weatherIcons[data.current.weather[0].icon] || '';
                
                // Update details
                feelsLikeEl.textContent = `${Math.round(data.current.feels_like)}°F`;
                windSpeedEl.textContent = `${Math.round(data.current.wind_speed)} mph`;
                humidityEl.textContent = `${data.current.humidity}%`;
                uvIndexEl.textContent = getUvIndexDescription(data.current.uvi);

                // Update 5-day forecast
                forecastContainer.innerHTML = '';
                data.daily.slice(1, 6).forEach(day => {
                    const forecastItem = document.createElement('div');
                    forecastItem.className = 'flex items-center justify-between text-sm';
                    forecastItem.innerHTML = `
                        <p class="opacity-70 w-1/4">${new Date(day.dt * 1000).toLocaleDateString('en-US', { weekday: 'short' })}</p>
                        <div class="w-1/4 flex justify-center items-center">
                            <div class="w-8 h-8">${weatherIcons[day.weather[0].icon] || ''}</div>
                        </div>
                        <p class="w-1/4 text-center">${day.weather[0].main}</p>
                        <p class="w-1/4 text-right font-semibold">${Math.round(day.temp.max)}° / ${Math.round(day.temp.min)}°</p>
                    `;
                    forecastContainer.appendChild(forecastItem);
                });
            };

            const getUvIndexDescription = (uvi) => {
                if (uvi < 3) return 'Low';
                if (uvi < 6) return 'Moderate';
                if (uvi < 8) return 'High';
                if (uvi < 11) return 'Very High';
                return 'Extreme';
            };
            
            const showLoading = (isLoading) => {
                loadingEl.classList.toggle('hidden', !isLoading);
                weatherDisplayEl.classList.toggle('hidden', isLoading);
                errorEl.classList.add('hidden');
            };

            const showError = (hasError) => {
                errorEl.classList.toggle('hidden', !hasError);
                if (hasError) {
                    weatherDisplayEl.classList.add('hidden');
                }
            };

            // Mock data for initial display and for when API key is not present
            const displayMockData = (city) => {
                 const mockData = {
                    current: {
                        dt: new Date().getTime() / 1000,
                        temp: 72,
                        feels_like: 74,
                        humidity: 60,
                        wind_speed: 5,
                        uvi: 1.5,
                        weather: [{ description: 'Clear sky', icon: '01d', main: 'Clear' }]
                    },
                    daily: [
                        {}, // Skip today
                        { dt: (new Date().getTime() / 1000) + 86400 * 1, temp: { max: 75, min: 60 }, weather: [{ icon: '02d', main: 'Clouds' }] },
                        { dt: (new Date().getTime() / 1000) + 86400 * 2, temp: { max: 78, min: 62 }, weather: [{ icon: '01d', main: 'Clear' }] },
                        { dt: (new Date().getTime() / 1000) + 86400 * 3, temp: { max: 80, min: 65 }, weather: [{ icon: '10d', main: 'Rain' }] },
                        { dt: (new Date().getTime() / 1000) + 86400 * 4, temp: { max: 77, min: 63 }, weather: [{ icon: '04d', main: 'Clouds' }] },
                        { dt: (new Date().getTime() / 1000) + 86400 * 5, temp: { max: 79, min: 64 }, weather: [{ icon: '01d', main: 'Clear' }] }
                    ]
                };
                updateUI(mockData, city.charAt(0).toUpperCase() + city.slice(1));
            };


            searchBtn.addEventListener('click', searchWeather);
            searchInput.addEventListener('keyup', (event) => {
                if (event.key === 'Enter') {
                    searchWeather();
                }
            });

            // Initial load
            getWeatherData('Huntsville');
        });
    </script>
</body>
</html>
